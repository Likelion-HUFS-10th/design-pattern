#Singleton

*개요*
-

**시스템 런타임, 환경 설정**에 대해 인스턴스를 1개만 생성하려 제공하는 전략

클래스 내부에 생성자를 private하게 생성 후, 클래스 내부에 이미 생성한(생성되지 않았다면 이 시점에 생성) 인스턴스를 호출하는 메서드를 사용하는 방식

*약점*
-
멀티 쓰레딩 환경에서 안전하지 않다. -> 동기화 전략이 필요하다!

*해결책*
-
- syncronized를 통한 동기화
- eager initialization(이른 초기화) 전략 사용
- 더블 체크 락킹 -> 임계영역에 접근을 줄이기 위해, 검증을 한 번 더 추가하는 방식
- static inner class 사용하기

정리하자면 멀티쓰레딩의 해결은 큰 맥락으로 보면 두가지로 나뉜다.
- 1.임계영역을 지정하는 방식
- 2.미리 만들어놓는 방식

하지만 위의 방식들은 뇌절코드를 사용하면 다양한 회피방법이 있다는 문제가 있다.
- enum 타입으로 지정하는 방식. -> 뇌절코드에도 안전한 싱글톤을 보장할 수 있지만 자유로운 상속이 힘들다.

*스프링과 싱글톤*
-
- 스프링 빈의 싱글톤 스코프(싱글톤 패턴은 아니지만 싱글톤을 보장하는 방법).
- java.lang.Runtime instance -> 실행환경(Runtime)에 대한 관리 싱글톤 인스턴스.
- 빌더, 퍼사드, 추상팩토리 등의 구현체의 일부로 응용.

